!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.storiesFs=t():e.storiesFs=t()}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function i(e){e.classList.add("disabled")}function s(e){e.classList.remove("disabled")}function r(e,t,i,s){void 0===s&&(s=!1);var r,n=i.slidesPerView,o=a(e);if(s)return c(0),Number(o.window);function l(){var t;a(e),c((Object.keys(n).forEach((function(e,i){e<=Number(o.window)&&(t=n[e])})),t.count))}function c(e){t.forEach((function(t){var i=t;r=0===e?Number(o.wrapper):Number(o.wrapper)/e,i.style.flexBasis=r+"px"}))}function a(e){return{window:window.innerWidth,wrapper:e.clientWidth}}return null==n&&(n={320:{count:4},960:{count:6},1280:{count:8}}),l(),window.addEventListener("resize",(function(){l()})),r}e.d(t,{default:()=>n});const n=function(){function e(e,t){this.trackStoriesFsEl=".stories-fs__track",this.slidesStoriesFsEl=".stories-fs__slide",this.activeIndex=0,this.countScrollWrapper=0,this.playAnimScroll=!1,this.fullScreenMode=!1,this.countActiveSlide=0,this.timerId=null,this.initSfs(e,t)}return e.prototype.initSfs=function(e,t){var s=this;return this.wrapperStoriesFs=document.querySelector(e),this.trackStoriesFs=this.wrapperStoriesFs.querySelector(this.trackStoriesFsEl),this.slidesStoriesFs=this.wrapperStoriesFs.querySelectorAll(this.slidesStoriesFsEl),null===this.wrapperStoriesFs?(console.error("Not found parent element"),!1):this.slidesStoriesFs.length<=0?(console.error("Not found slides elements"),!1):(this.widthSlide=r(this.wrapperStoriesFs,this.slidesStoriesFs,t),this.arrowsBtnEl=function(e,t){var i,s,r={};e.insertAdjacentHTML("afterbegin",'    \n        <div class="stories-fs__arrows">\n            <div class="stories-fs__arrow stories-fs__arrow--prev"></div>\n            <div class="stories-fs__arrow stories-fs__arrow--next"></div>\n        </div>');var n=e.querySelector(".stories-fs__arrows");if((null===(i=t.navigation)||void 0===i?void 0:i.elBtnPrev)&&(null===(s=t.navigation)||void 0===s?void 0:s.elBtnNext)){var o=document.querySelector(t.navigation.elBtnPrev),l=document.querySelector(t.navigation.elBtnNext);o&&(r.userBtnPrev=o,o.addEventListener("click",(function(){return d("prev")}))),l&&(r.userBtnNext=l,l.addEventListener("click",(function(){return d("next")}))),n.classList.add("hide-arrows")}var c=e.querySelector(".stories-fs__arrow--prev"),a=e.querySelector(".stories-fs__arrow--next");function d(t){e.dispatchEvent(new CustomEvent("changeSlide",{detail:{btn:"prev"===t?"prev":"next"}}))}return c&&(r.defBtnPrev=c,c.addEventListener("click",(function(){return d("prev")}))),a&&(r.defBtnNext=a,a.addEventListener("click",(function(){return d("next")}))),r}(this.wrapperStoriesFs,t),this.countActiveSlide=this.getCountSlidesInWrapWindow(),function(e,t){e.insertAdjacentHTML("afterbegin",'<div class="stories-fs__btn-close"></div>');var i=!1,s=e.querySelector(".stories-fs__btn-close"),r=document.querySelector("body");s.addEventListener("click",(function(){e.classList.remove("fullscreen"),r.classList.remove("overflow"),e.dispatchEvent(new CustomEvent("changeFullScreenMode",{detail:{fullScreen:!1}})),i=!1})),t.forEach((function(t,s){t.addEventListener("click",(function(){e.classList.add("fullscreen"),r.classList.add("overflow"),i||(e.dispatchEvent(new CustomEvent("changeFullScreenMode",{detail:{fullScreen:!0,activeIndex:s}})),i=!0)}))}))}(this.wrapperStoriesFs,this.slidesStoriesFs),this.slidesStoriesFs.forEach((function(e){var t=e.querySelector(".stories-fs__wrapper"),i=e.querySelectorAll(".stories-fs__inner");t.insertAdjacentHTML("afterbegin",'<div class="stories-fs__progress"></div>');for(var s=e.querySelector(".stories-fs__progress"),r=0;r<i.length;r++)s.insertAdjacentHTML("afterbegin",'\n            <div class="stories-fs__progress-item">\n                <div class="stories-fs__progress-bg"></div>\n            </div>')})),i(this.arrowsBtnEl.defBtnPrev),this.countActiveSlide>=this.slidesStoriesFs.length&&i(this.arrowsBtnEl.defBtnNext),this.wrapperStoriesFs.addEventListener("changeSlide",(function(e){"prev"!==e.detail.btn||s.playAnimScroll||(s.activeIndex--,s.prevSlide(s.activeIndex)),"next"!==e.detail.btn||s.playAnimScroll||(s.activeIndex++,s.nextSlide(s.activeIndex))})),this.wrapperStoriesFs.addEventListener("animSlide",(function(e){s.activeIndex++,s.nextSlide(s.activeIndex)})),void this.wrapperStoriesFs.addEventListener("changeFullScreenMode",(function(e){e.detail.activeIndex&&(s.activeIndex=e.detail.activeIndex),s.widthSlide=r(s.wrapperStoriesFs,s.slidesStoriesFs,t,e.detail.fullScreen),s.countActiveSlide=s.getCountSlidesInWrapWindow(),s.fullScreenMode=e.detail.fullScreen,s.scrollTrack(s.widthSlide,!1,s.activeIndex)})))},e.prototype.prevSlide=function(e){this.scrollTrack(-1*this.widthSlide,!0,e)},e.prototype.nextSlide=function(e){this.scrollTrack(this.widthSlide,!0,e)},e.prototype.scrollTrack=function(e,t,r){var n=this;if(!this.playAnimScroll){if(r>this.slidesStoriesFs.length-1)return this.activeIndex=this.slidesStoriesFs.length-1;if(r<0)return this.activeIndex=0;var o=this.countScrollWrapper,l=o+e,c=o<l?"next":"prev",a=o<l?Math.ceil((l-o)/32):Math.ceil((o-l)/32),d=(this.slidesStoriesFs.length-this.countActiveSlide)*this.widthSlide;this.fullScreenMode&&!t&&(l=this.widthSlide*r),this.fullScreenMode||t||(l=this.widthSlide*r-d),l<=0?(i(this.arrowsBtnEl.defBtnPrev),l=0):s(this.arrowsBtnEl.defBtnPrev),d<=0?(i(this.arrowsBtnEl.defBtnNext),i(this.arrowsBtnEl.defBtnPrev),l=0):s(this.arrowsBtnEl.defBtnNext),l>=d&&d>0&&(i(this.arrowsBtnEl.defBtnNext),l=d),this.countScrollWrapper=l,(null!=t?t:this.fullScreenMode)?(this.playAnimScroll=!0,this.timerId=setInterval((function(){n.trackStoriesFs.style.transform="translate(".concat(-1*o+"px",", 0)"),"next"==c?o+=a:o-=a,("next"===c&&o>=l||"prev"===c&&o<=l)&&(n.trackStoriesFs.style.transform="translate(".concat(-1*l+"px",", 0)"),clearInterval(n.timerId),n.playAnimScroll=!1)}),1)):this.trackStoriesFs.style.transform="translate(".concat(-1*l+"px",", 0)"),this.fullScreenMode&&function(e,t,i){var s=t[i],r=s.querySelectorAll(".stories-fs__progress-item"),n=s.querySelectorAll(".stories-fs__progress-bg"),o=s.querySelectorAll(".stories-fs__inner"),l=133.33333333333334;if(!(r.length<=0||o.length<=0||r.length!==o.length)){var c=r.length-1,a=0,d=0,u=0,v=0;e.addEventListener("changeSlide",(function(e){i<t.length-1&&f()})),e.addEventListener("changeFullScreenMode",(function(e){f()})),f(),h(),r.forEach((function(e,t){e.addEventListener("click",(function(){p(a),a=t,clearInterval(d),clearInterval(u),clearTimeout(v),h()}))}))}function f(){clearInterval(d),clearInterval(u),w(a),p(c),w(a)}function h(){r[a].classList.add("active"),o[a].classList.add("active"),S(a),d=setInterval((function(){var t;r[t=a].classList.remove("active"),o[t].classList.remove("active"),a++,clearInterval(u),S(a),a>=c&&(a=c),r[a].classList.add("active"),o[a].classList.add("active"),a>=c&&(clearInterval(d),v=setTimeout((function(){e.dispatchEvent(new CustomEvent("animSlide",{detail:{animSlide:!1}}))}),2e3))}),2e3)}function S(e){var t=n[e],i=10;u=setInterval((function(){t.style.width=i+"%",(i+=10)>100&&clearInterval(u)}),l)}function p(e){r[e].classList.contains("active")&&r[c].classList.remove("active"),o[e].classList.contains("active")&&o[c].classList.remove("active")}function w(e){n[e].style.width="0%",e<c&&w(++e)}}(this.wrapperStoriesFs,this.slidesStoriesFs,r)}},e.prototype.getCountSlidesInWrapWindow=function(){return this.wrapperStoriesFs.clientWidth/this.widthSlide},e}();return t.default})()));