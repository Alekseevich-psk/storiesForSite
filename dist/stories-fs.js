!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.storiesFs=t():e.storiesFs=t()}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function i(e){e.userBtnPrev&&!e.userBtnPrev.classList.contains("disabled")&&e.userBtnPrev.classList.add("disabled"),e.defBtnPrev.classList.contains("disabled")||e.defBtnPrev.classList.add("disabled")}function s(e){e.userBtnNext&&!e.userBtnNext.classList.contains("disabled")&&e.userBtnNext.classList.add("disabled"),e.defBtnNext.classList.contains("disabled")||e.defBtnNext.classList.add("disabled")}function n(e,t,i,s){var n=t[i],r=n.querySelectorAll(".stories-fs__progress-item"),l=n.querySelectorAll(".stories-fs__progress-bg"),a=n.querySelectorAll(".stories-fs__inner"),o=s.speedStory?s.speedStory:3e3,c=o/15;if(!(r.length<=0||a.length<=0||r.length!==a.length)){var d=r.length-1,u=0,v=null,h=null;w(),m(),r.forEach((function(e,t){e.addEventListener("click",(function(){u=t,S()}))})),e.addEventListener("holdEvent",(function(e){e.detail.holdEvent?(clearInterval(v),clearInterval(h)):S()}));var f=function(){e.dispatchEvent(new CustomEvent("animSlide",{detail:{animSlide:!1,activeSlide:i}}))},p=function(){e.dispatchEvent(new CustomEvent("changeItem",{detail:{animFlagChangeSlide:{interval:[v,h]}}}))};return{interval:[v,h]}}function S(){w(u),m(),p()}function w(e){void 0===e&&(e=0),clearInterval(v),clearInterval(h),x(e),E(e)}function m(){r[u].classList.add("active"),a[u].classList.add("active"),g(u),u<=d&&(v=setInterval((function(){!function(){if(u>=d)return clearInterval(v),f();r[u].classList.remove("active"),a[u].classList.remove("active"),u++,clearInterval(h),g(u),r[u].classList.add("active"),a[u].classList.add("active")}()}),o))}function g(e){var t=l[e],i=10;h=setInterval((function(){t.style.width=i+"%",(i+=10)>100&&clearInterval(h)}),c)}function E(e){r[e].classList.contains("active")&&r[e].classList.remove("active"),a[e].classList.contains("active")&&a[e].classList.remove("active"),e<d&&E(++e)}function x(e){l[e].style.width="0%",e<d&&x(++e)}}function r(e,t,i,s){void 0===s&&(s=!1);var n,r=i.slidesPerView,l=c(e);if(s)return o(0),Number(l.window);function a(){var t;c(e),o((Object.keys(r).forEach((function(e,i){e<=Number(l.window)&&(t=r[e])})),t.count))}function o(e){t.forEach((function(t){var i=t;n=0===e?Number(l.wrapper):Number(l.wrapper)/e,i.style.flexBasis=n+"px"}))}function c(e){return{window:window.innerWidth,wrapper:e.clientWidth}}return null==r&&(r={320:{count:4},960:{count:6},1280:{count:8}}),a(),window.addEventListener("resize",(function(){a()})),n}e.d(t,{default:()=>l});const l=function(){function e(e,t){this.wrapperStoriesFsEl=".stories-fs__wrapper",this.trackStoriesFsEl=".stories-fs__track",this.slidesStoriesFsEl=".stories-fs__slide",this.activeIndex=0,this.countScrollWrapper=0,this.playAnimScroll=!1,this.fullScreenMode=!1,this.countActiveSlide=0,this.timerId=null,this.animFlagChangeSlide=null,this.initSfs(e,t)}return e.prototype.initSfs=function(e,t){var n=this;return this.parentStoriesFs=document.querySelector(e),this.wrapperStoriesFs=this.parentStoriesFs.querySelector(this.wrapperStoriesFsEl),this.trackStoriesFs=this.wrapperStoriesFs.querySelector(this.trackStoriesFsEl),this.slidesStoriesFs=this.wrapperStoriesFs.querySelectorAll(this.slidesStoriesFsEl),null===this.parentStoriesFs?(console.error("Not found parent element"),!1):this.slidesStoriesFs.length<=0?(console.error("Not found slides elements"),!1):(this.widthSlide=r(this.wrapperStoriesFs,this.slidesStoriesFs,t),this.arrowsBtnEl=function(e,t){var i,s,n={};e.insertAdjacentHTML("afterbegin",'    \n        <div class="stories-fs__arrows">\n            <div class="stories-fs__arrow stories-fs__arrow--prev"></div>\n            <div class="stories-fs__arrow stories-fs__arrow--next"></div>\n        </div>');var r=e.querySelector(".stories-fs__arrows");if((null===(i=t.navigation)||void 0===i?void 0:i.elBtnPrev)&&(null===(s=t.navigation)||void 0===s?void 0:s.elBtnNext)){var l=document.querySelector(t.navigation.elBtnPrev),a=document.querySelector(t.navigation.elBtnNext);l&&(n.userBtnPrev=l,l.addEventListener("click",(function(){return d("prev")}))),a&&(n.userBtnNext=a,a.addEventListener("click",(function(){return d("next")}))),r.classList.add("hide-arrows")}var o=e.querySelector(".stories-fs__arrow--prev"),c=e.querySelector(".stories-fs__arrow--next");function d(t){e.dispatchEvent(new CustomEvent("changeSlide",{detail:{btn:"prev"===t?"prev":"next"}}))}return o&&(n.defBtnPrev=o,o.addEventListener("click",(function(){return d("prev")}))),c&&(n.defBtnNext=c,c.addEventListener("click",(function(){return d("next")}))),n}(this.wrapperStoriesFs,t),this.optionsSfs=t,this.countActiveSlide=this.getCountSlidesInWrapWindow(),function(e,t){e.insertAdjacentHTML("afterbegin",'<div class="stories-fs__btn-close"></div>');var i=!1,s=e.querySelector(".stories-fs__btn-close"),n=document.querySelector("body");t.forEach((function(t,s){t.addEventListener("click",(function(){e.classList.add("fullscreen"),n.classList.add("overflow"),i||(e.dispatchEvent(new CustomEvent("changeFullScreenMode",{detail:{fullScreen:!0,activeIndex:s}})),i=!0)}))}));var r=function(){e.classList.remove("fullscreen"),n.classList.remove("overflow"),e.dispatchEvent(new CustomEvent("changeFullScreenMode",{detail:{fullScreen:!1}})),i=!1};s.addEventListener("click",r),window.addEventListener("keydown",(function(e){"Escape"===e.key&&r()}))}(this.wrapperStoriesFs,this.slidesStoriesFs),this.slidesStoriesFs.forEach((function(e){var t=e.querySelector(".stories-fs__sub-wrapper"),i=e.querySelectorAll(".stories-fs__inner");t.insertAdjacentHTML("afterbegin",'<div class="stories-fs__progress"></div>');for(var s=e.querySelector(".stories-fs__progress"),n=0;n<i.length;n++)s.insertAdjacentHTML("afterbegin",'\n            <div class="stories-fs__progress-item">\n                <div class="stories-fs__progress-bg"></div>\n            </div>')})),function(e,t,i){if(!1!==i.swipeOnSlide){var s=null,n=null,r=null,l=!1;e.addEventListener("touchstart",(function(e){s=e.targetTouches[0].clientX,a()})),e.addEventListener("touchend",(function(e){n=e.changedTouches[0].clientX,d(s,n),o()})),e.addEventListener("mousedown",(function(e){s=e.clientX,a()})),e.addEventListener("mouseup",(function(e){n=e.clientX,d(s,n),o()}))}function a(){r=setTimeout((function(){c(!0),l=!0}),1e3)}function o(){clearTimeout(r),l&&(c(!1),l=!1)}function c(t){e.dispatchEvent(new CustomEvent("holdEvent",{detail:{holdEvent:!!t}}))}function d(t,i){Math.abs(t-i)<=50||e.dispatchEvent(new CustomEvent("changeSlide",{detail:{btn:t<i?"prev":"next"}}))}}(this.wrapperStoriesFs,this.slidesStoriesFs,t),function(e){e.style.height=e.clientHeight+"px"}(this.parentStoriesFs),i(this.arrowsBtnEl),this.countActiveSlide>=this.slidesStoriesFs.length&&s(this.arrowsBtnEl),this.wrapperStoriesFs.addEventListener("changeSlide",(function(e){"prev"!==e.detail.btn||n.playAnimScroll||(n.activeIndex--,n.prevSlide(n.activeIndex)),"next"!==e.detail.btn||n.playAnimScroll||(n.activeIndex++,n.nextSlide(n.activeIndex))})),this.wrapperStoriesFs.addEventListener("changeItem",(function(e){n.animFlagChangeSlide=e.detail.animFlagChangeSlide})),this.wrapperStoriesFs.addEventListener("animSlide",(function(e){e.detail.activeSlide===n.activeIndex&&n.fullScreenMode&&(n.activeIndex++,n.nextSlide(n.activeIndex))})),void this.wrapperStoriesFs.addEventListener("changeFullScreenMode",(function(e){e.detail.activeIndex&&(n.activeIndex=e.detail.activeIndex),n.widthSlide=r(n.wrapperStoriesFs,n.slidesStoriesFs,t,e.detail.fullScreen),n.countActiveSlide=n.getCountSlidesInWrapWindow(),n.fullScreenMode=e.detail.fullScreen,n.scrollTrack(n.widthSlide,!1,n.activeIndex)})))},e.prototype.prevSlide=function(e){this.scrollTrack(-1*this.widthSlide,!0,e)},e.prototype.nextSlide=function(e){this.scrollTrack(this.widthSlide,!0,e)},e.prototype.scrollTrack=function(e,t,r){var l=this;if(!this.playAnimScroll){if(r>this.slidesStoriesFs.length-1)return this.activeIndex=this.slidesStoriesFs.length-1;if(r<0)return this.activeIndex=0;var a,o=this.optionsSfs.speedAnimNextSlide?this.optionsSfs.speedAnimNextSlide:32,c=this.countScrollWrapper,d=c+e,u=c<d?"next":"prev",v=c<d?Math.ceil((d-c)/o):Math.ceil((c-d)/o),h=(this.slidesStoriesFs.length-this.countActiveSlide)*this.widthSlide;t||(d=this.widthSlide*r),d<=0&&(i(this.arrowsBtnEl),d=0),d>0&&((a=this.arrowsBtnEl).userBtnPrev&&a.userBtnPrev.classList.contains("disabled")&&a.userBtnPrev.classList.remove("disabled"),a.defBtnPrev.classList.contains("disabled")&&a.defBtnPrev.classList.remove("disabled")),d>=h&&h>0&&(d=h),r==this.slidesStoriesFs.length-1||d>=h&&h>0?s(this.arrowsBtnEl):function(e){e.userBtnNext&&e.userBtnNext.classList.contains("disabled")&&e.userBtnNext.classList.remove("disabled"),e.defBtnNext.classList.contains("disabled")&&e.defBtnNext.classList.remove("disabled")}(this.arrowsBtnEl),this.countScrollWrapper=d,(null!=t?t:this.fullScreenMode)?(this.playAnimScroll=!0,this.timerId=setInterval((function(){l.trackStoriesFs.style.transform="translate(".concat(-1*c+"px",", 0)"),"next"==u?c+=v:c-=v,("next"===u&&c>=d||"prev"===u&&c<=d)&&(l.trackStoriesFs.style.transform="translate(".concat(-1*d+"px",", 0)"),clearInterval(l.timerId),l.playAnimScroll=!1)}),1)):(this.trackStoriesFs.style.transform="translate(".concat(-1*d+"px",", 0)"),this.updateAnimationSlide()),this.fullScreenMode&&(this.updateAnimationSlide(),this.animFlagChangeSlide=n(this.wrapperStoriesFs,this.slidesStoriesFs,r,this.optionsSfs))}},e.prototype.updateAnimationSlide=function(){if(this.animFlagChangeSlide)for(var e=0;e<this.animFlagChangeSlide.interval.length;e++)clearInterval(this.animFlagChangeSlide.interval[e])},e.prototype.getCountSlidesInWrapWindow=function(){return this.wrapperStoriesFs.clientWidth/this.widthSlide},e}();return t.default})()));